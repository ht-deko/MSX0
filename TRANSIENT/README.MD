# MSX0 用トランジェントコマンド (外部コマンド) 
MSX0 用に作られたトランジェントコマンドです。基本的に 48K システム用にコンパイルされていますので、漢字モードの MSX-DOS2 でも実行可能だと思います。実機での確認はできていません。

## ■ M0CHGAP
Wi-Fi の接続先を変更する。

```
M0CHGAP [登録AP番号]
```
 
 - パラメータなしで実行すると、登録APリストを表示します。
 - 登録AP番号を指定するとその AP に切り替わり、Wi-Fi リスタート。
 - 0 で OFF です。
 - 4 で AP Mode です。
 - AP 登録には M0SETAP を使います。


## ■ M0CHGDSK
ディスク交換を行う。

```
M0CHGDSK [ディスクイメージ]
```

 - パラメータなしで実行すると、ファイルリストと現在のディスクを示すインジケーターを表示します。
 - ディスクイメージファイル名を指定すると、ディスクを変更します。
 - ファイル名は自動的に大文字に変換されます。
 - ファイル名は拡張子の省略が可能です。省略されると .DSK を追加します (拡張子のないファイルは使えません)。
 - 空白を含むファイル名のためにダブルクォーテーション処理が入っていますが、簡易的なので可能な限り空白を含むファイル名は使わないでください。
 - ディスク交換に失敗するとメッセージが表示されます。
 - 交換先に M0CHGDSK があるとは限らないので、RAM ディスクにコピーして使う事をオススメします。
 - MSX-C の環境ディスクを作るのに使ってみました。


## ■ M0CHGINP
入力デバイスの変更を行う。

```
M0ChgInp [/Gnum] [/Pnum] [/Jnum] [/Anum] [/Bnum]
```

[Setup Utility の Input](https://qiita.com/ht_deko/items/b284cb93ac34e2b77d9a#input) と同等の設定を行います。

| スイッチ | 説明 |
|:---|:---|
| /Gn | GamePad Face の接続先を指定します (n=0..3)。 |
| /Pn | タッチパネルの接続先を指定します (n=0..3)。 |
| /Jn | タッチジョイパッドの接続先を指定します (n=0..3)。 |

接続先として設定可能な値です。

| n の値 | 説明 |
|:---:|:---|
| 0 | 割り当てない|
| 1 | キーボード|
| 2 | ジョイスティックポート #1|
| 3 | ジョイスティックポート #2|

ゲームパッドの連射に関する設定です。

| スイッチ | 説明 |
|:---|:---|
| /An | A ボタンの連射速度を変更する (n=0..3)。 |
| /Bn | B ボタンの連射速度を変更する (n=0..3)。 |

連射速度として設定可能な値です。

| n の値 | 説明 |
|:---:|:---|
| 0 | 連射なし |
| 1 | 低速 |
| 2 | 中速 |
| 3 | 高速 |

 - パラメータ未指定の場合には使い方と現在の設定を表示します。
 - GamePad / TouchPad / TouchJoypad の接続先とジョイパッドのボタンの連射速度を変更可能です。
 - スイッチは `-` でも `/` でもよく、大文字/小文字も判断しません。
 - 範囲外の値は 0 とみなされます。
 - 無効なスイッチは無視されます。


## ■ M0CLKUP
エミュレータのクロックアップを行う。

```
M0CLKUP [パーセント]  
```

 - パーセントを指定しない場合には現在の速度が表示されます。
 - パーセントは 32..255 の間で有効です。
 - C コンパイラでコンパイルする前にクロックアップして、実行前にクロックを元に戻すとかできます。



## ■ M0I2CSCN
I<sup>2</sup>C スキャナ。

```
M0I2CSCN
```

 - I<sup>2</sup>C ノードのデバイスを検索し、その ID を表示します。
 - 内部接続 (Internal) は `device/i2c_i` にリストされます。
 - 充電用のポゴピンに出ているのも内部接続用の I<sup>2</sup>C バスです。
 - Port_A 接続 は `device/i2c_a` にリストされます。
 

## ■ M0SETAP
Wi-Fi の AP リストを登録する。

```
M0SETAP [登録AP番号 SSID パスワード [ON]]
```

 - パラメータなしで実行すると、AP リストを表示します。
 - 登録AP番号は 1～3。SSID と パスワードは平文で入力する事になるので、セキュリティに注意。
 - 4 番目のパラメータに `ON` (大文字/小文字の区別なし) を指定すると、登録した AP がアクティブになり Wi-Fi リスタート。
 - 現在の登録 AP の内容が変更されると Wi-Fi リスタート。
 - SSID に `-` を入力すると、登録 AP を空にできます。
 - 一度登録した AP を未登録状態にはできません。環境設定ファイル (conf.txt) を直接いじる必要があります。
 - 接続先 AP の変更には M0CHGAP を使います。


## ■ M0SETCLR
前景色、背景色、ボーダー色を設定する。


```
M0SETCLR [/Fnum] [/Bnum] [/Dnum]
```

 - パラメータなしで実行すると、現在の設定を表示します。
 - スイッチは `-` でも `/` でもよく、大文字/小文字も判断しません。
 - 無効なスイッチは無視されます。


## ■ M0SETUP
Setup Utility を起動する。


```
M0SETUP
```

 - Setup Utility を起動します。
 - 実行後にリセットが行われます。


## ■ M0SHTDN
電源断または再起動を行う。

```
M0SHTDN [-h|-r]
```

 - パラメータなしまたは `-h` で『MSX0 Stack』の電源断、`-r` で再起動します。
 - スイッチは `-` でも `/` でもよく、大文字/小文字も区別しません。


## ■ M0TPASZ
TPA サイズを表示。

```
M0TPASZ
```

 - TPA サイズを表示します。
 - MSX 固有の機能を使っていないので、恐らく CP/M-80 で動作します。
 - コンパイラオプションで 40K システムをターゲットにしました。MSX0 (MSX-DOS2) よりメモリ搭載量の少ないシステムでも動作すると思います。 


## ■ M0VER
 バージョン情報。

```
M0VER
```

 - MSX0 に関するバージョンを表示します。
 - MSX-DOS1 では MSX-DOS に関する詳しいバージョン情報を取得できません。


## ■ TPKEYS
ファンクションキーの表示切替。

```
TPKEYS [/B] [/I] [/P] [/T] [/S] [/H]
```

 - /B または /I でファンクションキーの内容を初期化 (BASIC) します。
 - /P または /T でファンクションキーの内容を Turbo Pascal 用に設定します。
 - /S でファンクションキーの内容を表示します。
 - /H でファンクションキーの内容を非表示にします。
 - 複数のスイッチを指定できます (左から順に実行されます)。
 - スイッチは `-` でも `/` でもよく、大文字/小文字も区別しません。
 - MSX0 固有の機能に依存していません。
 
**See also:**

 - [MDL-LIB version 2.2 の使い方 (Qiita)](https://qiita.com/ht_deko/items/6f15aee0bd25b550e4df)
 - [【MSX0】IOT.LIB (Qiita)](https://qiita.com/ht_deko/items/a5c0bf6e7969093beb3c)
 
